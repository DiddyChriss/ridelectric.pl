{% extends 'shop/base_shop.html' %}
{% load static %}

{% block productshop %}

{% if shop_products_cart.count == 0 %}
  <div class="container row">
    <p class="mx-auto">Brak produktów w koszyku </p>
  </div>
  {% else %}
<!--Section: Block Content-->
<section>
  <!--Grid row-->
  <div class="row">
    <!--Grid column-->
    <div class="col-lg-8">
      <div class="container row">
        <h5 class="ml-3 mt-1">Koszyk (Produkty - <span>{{ shop_products_cart.count }}</span>)</h5>
        <form class="form-inline mr-n3 ml-auto mt-n1 mb-2" action='.' method='POST'> {% csrf_token %}
          <button type="submit" class="btn btn-danger" name="delete_all_in_cart">
            Wyczyść Koszyk
          </button>
        </form>
      </div>
      {% if messages %}
        {% for message in messages %}
                <div class="alert alert-danger my-3 mx-3 text-center" role="alert">
                    {{ message }}
                </div>
        {% endfor %}
      {% endif %}

      {%  for id in shop_products_cart %}
      <!-- Card -->
      <div class="card wish-list mb-3">
        <div class="card-body">
          <div class="row mb-4">
            <div class="col-md-12 col-lg-12 col-xl-12">
              <div class="view zoom overlay z-depth-1 rounded mb-3 mb-md-0">
                <a href="#!">
                  <div class="mask waves-effect waves-light">
                    <img class="img-fluid w-100"
                      src="{{ id.image_cart.url }}">
                    <div class="mask rgba-black-slight waves-effect waves-light"></div>
                  </div>
                </a>
              </div>
            </div>
            <div class="col-md-7 col-lg-9 col-xl-9">
              <div>
                <div class="d-flex justify-content-between">
                  <div>
                    <h6 class="my-4 ">{{ id.title_cart }}</h6>
                    <form class="form-inline mr-n3 ml-auto mt-n1 mb-2" action='{{ id.id }}/' method='POST'>
                      {% csrf_token %}
                      <button  class="btn-small btn-primary" type="submit" name="back_to_product">
                        Opis Produktu
                      </button>
                    </form>
                  </div>
                  <div>
                    <small id="passwordHelpBlock" class="form-text text-muted text-center">
                      Ilość:
                    </small>
                      {{ form_quantity }}
                  </div>
                </div>
                <div class="d-flex justify-content-between align-items-center">
                  <div>
                    <form class="form-inline " action='{{ id.id }}/' method='POST'> {% csrf_token %}
                      <button type="submit" class="btn-small btn-danger" name="delete_from_cart">
                        Usuń z koszyka
                      </button>
                    </form>
                  </div>
                  <p class="mb-0"><span><strong>{{ id.price_cart }} PLN</strong></span></p>
                </div>
              </div>
            </div>
          </div>
          <hr class="mb-2">
          <p class="text-primary mb-n2"><i class="fas fa-info-circle mr-1"></i> Nie zwlekaj z dokonaniem płatności,
            samo dodanie produktów do koszyka nie oznacza ich zakupu.</p>
        </div>
          <!-- Card -->
        <div class="card mb-2">
          <div class="card-body">
            <h5 class="mb-1 mt-n2">Przewidywany czas dostawy</h5>
            <p class="mb-n2">Do 60 dni</p>
          </div>
        </div>
      <!-- Card -->
      </div>
      <!-- Card -->
 {% endfor %}
    </div>
    <div class="col-lg-4 mt-5">
      <div class="card mb-3">
        <div class="card-body">
          <h5 class="mb-1">Formy Płatności</h5>
          <img class="mr-2" width="45px"
            src="{% static 'img/payment/visa.svg' %}"
            alt="Visa">
          <img class="mr-2" width="45px"
            src="{% static 'img/payment/paypal.ico' %}"
            alt="PayPal acceptance mark">
        </div>
      </div>
      <!-- Card -->
      <div class="card mb-3">
        <div class="card-body">
          <h5 class="mb-3">Razem do zapłaty</h5>
          <ul class="list-group list-group-flush">
            <li class="list-group-item d-flex justify-content-between align-items-center border-0 px-0 pb-0">
              Do zapłaty
              <span>
              {%  for id in shop_products_cart %}
                {{ id.price_cart }}
              {% endfor %}
              PLN</span>
            </li>
            <li class="list-group-item d-flex justify-content-between align-items-center px-0">
              Wysyłka
              <span>0 PLN</span>
            </li>
            <li class="list-group-item d-flex justify-content-between align-items-center border-0 px-0 mb-3">
              <div>
                <strong>Razem do zapłaty</strong>
                <strong>
                  <p class="mb-0">(z VAT)</p>
                </strong>
              </div>
              <span><strong>5450 PLN</strong></span>
            </li>
          </ul>
          <button type="button" class="btn btn-primary btn-block waves-effect waves-light">Zapłać</button>
        </div>
      </div>
      <!-- Card -->
    </div>
    <!--Grid column-->
  </div>
  <!--Grid row-->
</section>
<!--Section: Block Content-->
{% endif %}

{% endblock %}
